# 함수형 코딩

## 액션과 계산, 데이터 구분하기

\*\*함수형 프로그래머는 코드를 액션과 계산, 데이터로 구분한다.

1. 액션

- 호출하는 횟수나 호출하는 시점이 중요한 함수를 분리하기.
- 시간이 지남에 따라 안전하게 상태를 바꿀 수 있는 방법
- 순서를 보장하는 방법
- 액션이 정확히 한 번만 실행되게 보장하는 방법

```javascript
// 액션 (액션을 부르는 시점에 의좀)
sendEmail(to, from, subject, body);
saveUserDB(user);
getCurrentTime();
```

2. 계산

- 정확성을 위한 정적 분석
- 소프트웨어에서 쓸 수 있는 수학적 지식
- 테스트 전략

```javascript
// 계산: 계산은 입력값을 계산해 출력하는 것 (판탄, 결정)
sum(numbers);
string_length(str);
```

3. 데이터

- 효율적으로 접근하기 위해 데이터를 구성하는 방법
- 데이터를 보관하기 위한 기술
- 데이터를 이용해 중요한 것을 발견하는 원칙

```javascript
// 데이터: 데이터는 이벤트에 대한 사실을 기록한 것
  [1, 19, 2, 45, 3, 98]
  {firstName: "raven", lastName: "Black"}
```

## 작업 구분하기

1. 사용자가 작업 완료 표시를함
2. 클라이언트가 서버로 메시지를 보냄
3. 서버가 메시지를 받음
4. 서버가 데이터베이스를 변경
5. 서버가 누구에게 알림을 보낼지 결정
6. 서버가 이메일로 알림을 보냄

### 함수형 프로그래밍은 분산 시스템에 잘 어울림

규칙 3가지

1. 메시지 순서가 바뀔 수 있다.
2. 메시지는 한 번 이상 도착할 수도 있고 도착하지 않을 수도 있다.
3. 응답을 받지 못하면 무슨일이 생겼는지 알 수 없다.

## 현실에서의 함수형 사고

1. 액션과 계산, 데이터

1. 액션


    - 반죽 펴기
    - 피자 배달
    - 재료 주문

2. 계산


    - 조리법에 나온 것을 두 배로 만들기
    - 쇼핑 목록 결정

3. 데이터


    - 고객 주문
    - 영수증
    - 조리법

2. 변화 가능성에 따라 코드 나누기

- 계층형 설계
  - 비즈니스 규칙
  - 도메인 규칙
  - 기술 스택 계층

3. 일급 추상

4. 분산 시스템을 타임라인으로 시각화하기

5. 각각의 타임라인은 다른 순서로 실행
6. 기본적으로 타임라인은 서로 순서를 맞추지 않는다.
7. 액션이 실행되는 시간은 중요하지 않음
8. 드물지만 타이밍이 어긋나는 경우가 실제로 존재
9. 타임라인 다이어그램으로 시스템의 문제를 알 수 있음

10. 해결

- 커팅(고차 동작)
